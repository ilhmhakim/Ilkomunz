{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link rel="stylesheet" href="{% static 'realcss/homepage.css' %}">
</head>

<body>
    <form action="/search" method="POST">
    {% csrf_token %}
    <section class="topBar">
        <input class="searchBar contentSB cariKomunitas" type="text" name="username" placeholder="Cari Komunitas">
        <img class="searchIcon" src="{% static 'real/light.svg' %}" alt="searchIcon">
        <button class="notification" onclick="location.href='notification'" type="button">
            <div class="iconNotif"><img src="{% static 'real/notification.svg' %}"></div>
        </button>
    </section>
    </form>

    <section class="navbar-ver-1">
        <div class="overlap-group3">
            <div class="overlap-group-2">
                <div class="overlap-group-1-1 overlap-group-1_5">
                    <div class="logo-with-text">
                        <img class="logo-with-text" src="{% static 'real/Logo with Text.svg' %}" alt="logo-with-text">
                    </div>
                </div>
                <div class="change-lay-out">
                    <img class="chevron-left" src="{% static 'real/chevroLeft_ico.svg' %}" alt="">
                </div>
            </div>
            <div class="navbar-comp">
                <div class="bg"></div>
                <button class="x-active" onclick="location.href='/'" type="button">
                    <div class="content">
                        <img class="ui" src="{% static 'real/beranda_ico.svg' %}" alt="beranda-ico">
                        <div class="beranda">Beranda</div>
                    </div>
                </button>
                <button class="x-unactive" onclick="location.href='komunitas'" type="button">
                    <div class="content">
                        <img class="ui" src="{% static 'real/Community_ico.svg' %}" alt="Community_ico">
                        <div class="komunitas">Komunitas</div>
                    </div>
                </button>
                <button class="x-unactive" onclick="location.href='presensipage'" type="button">
                    <div class="content">
                        <img class="ui" src="{% static 'real/presensi_ico.svg' %}" alt="presensi_ico">
                        <div class="presensi">Presensi</div>
                    </div>
                </button>
                <button class="x-unactive" onclick="location.href='artikelpage'" type="button">
                    <div class="content">
                        <img class="ui" src="{% static 'real/article_ico.svg' %}" alt="article_ico">
                        <div class="artikel">Artikel</div>
                    </div>
                </button>
                <div class="rect-3105"></div>
                <div class="log-out">
                   <a href"/logout"><div class="frame-1561-1">
                        <img class="ui" src="{% static 'real/logOut_ico.svg' %}" alt="log-out">
                        <div class="log-out">Logout</div>
                    </div></a>
                </div>
                <div class="frame-1566-1">
                    <img class="flag" src="{% static 'real/flag_ico.svg' %}" alt="flag_ico">
                    <div class="bahasa">Bahasa</div>
                </div>
            </div>
        </div>
    </section>

    
    <section class="post-card">
        <div class="overlap-group2">
            <form action="upload" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="group-container">
                <img class="mask-group-1" src="{{user_profile.profileimg.url}}" alt="fotoprof">
                <input class="overlap-group-1-2 overlap-group-1-5 tulisCeritamuDiSini" type="text" name ="caption"
                placeholder="Tulis ceritamu di sini...">
            </div>
            <div class="pilihanPost">
                <button class="opsi-1" type="button">
                    <img class="imageIcon" src="{% static 'real/Image.svg' %}" alt="image">
                    <div class="image">Foto</div>
                </button>
                <button class="opsi-3" type="button">
                    <img class="articleIcon" src="{% static 'real/Article.svg' %}" alt="Article">
                    <div class="article">Article</div>
                </button>
                <div class="opsi-4">
                    <button class="submitButton" type="submit">Submit</button>
                </div>
            </div>
            <div class="pop-up-foto">
                <div class="top-bar-pop-up-foto">
                    <div class="judul-pop-up">Pilih gambar untuk dibagikan</div>
                    <img src="{% static 'real/close-fill.svg' %}" alt="close">
                </div>
                <input type="file" id="fileInput" name="image_upload" placeholder="Masukkan Gambar">
                <div class="button-pop-up">
                    <button class="batalkan-pop-up-foto" type = "button">Batalkan</button>
                    <button class="selesai-pop-up-foto" type = "button">Selesai</button>
                </div>
            </div>
            </form>
            <script>
                const opsi1Button = document.querySelector('.opsi-1');
                const closeButton = document.querySelector('.top-bar-pop-up-foto img');
                const batalkanButton = document.querySelector('.batalkan-pop-up-foto');
                const popUpFoto = document.querySelector('.pop-up-foto');

                opsi1Button.addEventListener('click', () => {
                    popUpFoto.classList.add('show-popup');
                });

                closeButton.addEventListener('click', () => {
                    popUpFoto.classList.remove('show-popup');
                });

                batalkanButton.addEventListener('click', () => {
                    popUpFoto.classList.remove('show-popup');
                });
            </script>

            <div class="pop-up-artikel">
                <div class="top-bar-pop-up-artikel">
                    <div class="judul-pop-up">Tulis artikel yang diinginkan</div>
                    <img src="{% static 'real/close-fill.svg' %}" alt="close">
                </div>
                <form action="uploadartikel" method = "post" enctype="multipart/form-data">
                    {% csrf_token %}
                <h4>Tuliskan Tema Artikel</h4>
                <input class="tuliskan-judul-artikel" type="text" name= "tipe_artikel" placeholder="Tuliskan tema artikel">
                <h4>Tuliskan judul</h4>
                <input class="tuliskan-judul-artikel" type="text" name="judul" placeholder="Tuliskan judul artikel">
                <h4>Masukkan gambar</h4>
                <input class="image-input-pop-up" type="file" name="imgartikel" placeholder="Masukkan Gambar">
                <h4>Tulis Artikel</h4>
                <input class="text-input-pop-up" type="text" name="isiartikel" placeholder="Tuliskan artikelmu di sini">
                <div class="button-pop-up">
                    <button class="batalkan-pop-up-artikel" type="button">Batalkan</button>
                    <button class="selesai-pop-up-artikel" type="submit">Selesai</button>
                </div>
                </form>
            </div>
            <script>
                const opsi3Button = document.querySelector('.opsi-3');
                const closeButton2 = document.querySelector('.top-bar-pop-up-artikel img');
                const batalkanButton2 = document.querySelector('.batalkan-pop-up-artikel');
                const popUpArtikel = document.querySelector('.pop-up-artikel');

                opsi3Button.addEventListener('click', () => {
                    popUpArtikel.classList.add('show-popup2');
                });

                closeButton2.addEventListener('click', () => {
                    popUpArtikel.classList.remove('show-popup2');
                });

                batalkanButton2.addEventListener('click', () => {
                    popUpArtikel.classList.remove('show-popup2');
                });
            </script>
        </div>
    </section>

    {% for post in posts reversed%}
    <section class="card-postingan">
        <div class="top-bar-di-post">
            <div class="profil-di-post">
                {% for key, value in dict.items %}
                    {% if key == post.user%}
                    <a href="profile/{{post.user}}"> <img src="{{value.profileimg.url}}"></a>
                    <div class="nama-status-di-postingan">
                        <a href = "profile/{{post.user}}" style="color: inherit; text-decoration: none;"><div class="name">{{value.user.username}}</div></a>
                        {% if value.tipe != 'komunitas' %}
                        <p>Mahasiswa</p>
                        {% else %}
                        <p>Komunitas</p>
                        {% endif %}
                    </div>
                    {% endif %}    
                {% endfor %}
                </div>
            {% comment %} <a href="#pop-up-more-square" class="titik-tiga-di-post">
                <img src="{% static 'real/More Square.svg' %}" alt="More Square">
            </a>
            <div class="content-pop-up">
                <div id="pop-up-more-square">
                    <button class="salin-link">
                        <img src="{% static 'real/salin-link-ico.svg' %}" alt="salin-link">
                        <p>Salin link</p>
                    </button>
                    <button class="hide-post">
                        <img src="{% static 'real/hide-post-svg.svg' %}" alt="hide-post">
                        <p>Sembunyikan postingan</p>
                    </button>
                    <button class="report-post">
                        <img src="{% static 'real/report-post-ico.svg' %}" alt="report-post">
                        <p>Laporkan postingan</p>
                    </button>
                </div>
            </div> {% endcomment %}
        </div>
        <div class="caption-di-post">
            <p class="caption">{{post.caption}}</p>
        </div>
        <div class="foto-di-post">
            <img src="{{post.image.url}}" alt="IMG_0180">
        </div>                    
        {% if post.no_of_likes != 0%}
            <h5 class="liked-by-di-post">Liked by {{post.no_of_likes}}</h5>
        {%endif%}
        <div class="opsi-reaction">
            <div class="like-comment">
                <a href="/likepost?post_id={{post.id}}">
                    <img class="like-postingan" src="{% static 'real/Heart.svg' %}" alt="Heart">
                </a>
                <a><img class="komen-postingan" src="{% static 'real/Chat.svg' %}" alt="chat"></a>
                <div class="komen-di-postingan">
                    <div class="top-bar-komentar">
                        <h4>Komentar</h4>
                        <img src="{% static 'real/close-fill.svg' %}" alt="close-fill">
                    </div>
                    <div class="komen-orang">
                        {% for item in comment_posts %}
                            {% if item.post_id == post.id|stringformat:"s" %}
                            <div class="profil-orang-komen">
                                <img src="{{ item.img.url }}" width="25" height="25" alt="profil-orang-komen">
                                <div class="waktu-orang-komen">
                                    <div class="nama-status-orang-komen">
                                        <h5>{{ item.user }}</h5>
                                        <p>Mahasiswa</p>
                                    </div>
                                    <p class="waktu-komen">{{ item.time_created }}</p>
                                </div>
                            </div>
                            <div class="komennya-orang">
                                <p>{{ item.comment }}</p>
                            </div>
                            <br>
                            {% endif %}
                        {% endfor %}
                        <form method="post" action="comment">
                        {% csrf_token %}
                        <input type="hidden" value="{{post.id}}" name="post_id"/>
                        <input type="hidden" value="{{user_profile.user.username}}" name="pk"/>
                        <div class="orang-punya-komen">
                            <img class="kita-orang-komen" src="{{user_profile.profileimg.url}}" alt="">
                            <input name="content" class="komenan-kita-orang" type="text" placeholder="Tuliskan komentarmu">
                            <button class="submit-komen-button">
                                <img src="{% static 'real/send-plane.svg' %}" alt="">
                            </button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
            <script>
                const komenButton = document.querySelector('.komen-postingan');
                const closeButtonKomen = document.querySelector('.top-bar-komentar img');
                const popUpKomentar = document.querySelector('.komen-di-postingan');

                komenButton.addEventListener('click', () => {
                    popUpKomentar.classList.add('show-popup4');
                });

                closeButtonKomen.addEventListener('click', () => {
                    popUpKomentar.classList.remove('show-popup4');
                });
            </script>
            {% if post.user == user_profile.user.username %}
            <div class="bookmark-postingan">
                <a href="/delete?id={{post.id}}"><img class="bookmark-postingan" src="{% static 'real/delete-bin-5-line.svg' %}" alt="Bookmark"></a>
            </div>
            {% endif %}
        </div>
    </section>
    {% endfor %}

    <section class="frameKanan">
        <div class="frameDalem">
            <div class="myProfile">
                <form action="settings" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="judulAtas">
                    <h1 class="title">Profil Saya</h1>
                    <button class="go-to-settings" onclick="action.href='#'" type="button">
                        <img class="iconGear" src="{% static 'real/Icon nonActive.svg' %}" alt="iconGear">
                    </button>
                    <div class="profil-settings">
                        <div class="top-bar-profil-settings">
                            <h4 class="judul-profil-settings">Pengaturan Profil</h4>
                            <img src="{% static 'real/close-fill.svg' %}" alt="close-fill">
                        </div>
                        <div class="change-profile-picture">
                            <img src="{{user_profile.profileimg.url}}" width = "100" height = "100" alt="change-profile-picture">
                            <input type="file" name="image">
                            {% comment %} <label for="profilePictureInput" class="button-ganti-pp">
                                <img src="{% static 'real/pencil-line.svg' %}" alt="pencil-line">
                                <p>Ganti profile picture</p>
                            </label> {% endcomment %}
                        </div>
                        <div class="detail-info-user">
                            <div class="bagian-in-user-settings">
                                <div class="judul-section">Nama</div>
                                <input type="text" name="name" placeholder="{{user_profile.nama}}">
                            </div>
                            <div class="bagian-in-user-settings">
                                <div class="judul-section">Bio</div>
                                <input type="text" name="bio" placeholder="{{user_profile.bio}}">
                            </div>
                            <div class="bagian-in-user-settings">
                                <div class="judul-section">Jurusan</div>
                                <input type="text" name="jurusan" placeholder="{{user_profile.jurusan}}">
                            </div>
                            <div class="bagian-in-user-settings">
                                <div class="judul-section">Angkatan</div>
                                <input type="text" name="angkatan" placeholder="{{user_profile.angkatan}}">
                            </div>
                            <button class="button-ganti-pp" onclick="location.href='#'">
                                <img src="{% static 'real/pencil-line.svg' %}" alt="pencil-line">
                                <p>Ganti Identitas</p>
                            </button>
                        </div>
                    </div>
                    <script>
                        const userSettingButton = document.querySelector('.go-to-settings');
                        const closeButtonUserSetting = document.querySelector('.top-bar-profil-settings img');
                        const popUpUserSetting = document.querySelector('.profil-settings');

                        userSettingButton.addEventListener('click', () => {
                            popUpUserSetting.classList.add('show-popup3');
                        });

                        closeButtonUserSetting.addEventListener('click', () => {
                            popUpUserSetting.classList.remove('show-popup3');
                        });
                    </script>
                </div>
                <div class="profileCard">
                    <div class="overlap-group">
                        <img class="line-7" src="{% static 'real/Line-7.svg' %}" alt="Line 7">
                        <div class="rect-405"><img width="280" height="75" src="{{user_profile.sampulimg.url}}"></div>
                        <a href="profile/{{user_profile.user.username}}" class="profile-2"><img heighy="100" width ="100"src="{{user_profile.profileimg.url}}" alt="profile-2"></a>
                    </div>
                    <div class="nama-status">
                        <div class="nameMhs">{{user_profile.nama}}</div>
                        {% if user_profile.tipe == 'komunitas' %}
                        <div class="mhs-1">Komunitas</div>
                        {% else %}
                        <div class="mhs-1">Mahasiswa</div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            
            <div class="followedKomun">
                <div class="overlap-grup-1">
                    <div class="komunitasYangDiikuti">Komunitas yang diikuti</div>
                    <img class="line-6" src="{% static 'real/Line-6.svg'%}" alt="Line 6">
                    
                    {% for item in komun %}
                    <div class="folcmnt">
                        <div class="komun-1">
                            <div class="flex-col">
                                <div class="csi">{{item.nama}}</div>
                                {% comment %} <div class="jmlhAnggota">500 Anggota</div> {% endcomment %}
                                <div class="flwdButton">
                                    <img src="{% static 'real/check-line 1.svg' %}" alt="check-line 1" class="check-line-1">
                                    <div class="diikuti">Joined</div>
                                </div>
                            </div>
                            <div class="logoKomun">
                                <img src="{{item.profileimg.url}}" alt="">
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% comment %} <div class="folcmnt">
                        <div class="komun-2">
                            <div class="flex-col">
                                <div class="agriUX">AgriUX</div>
                                <div class="jmlhAnggota">500 Anggota</div>
                                <div class="flwdButton">
                                    <img src="{% static 'real/check-line 1.svg' %}" alt="check-line 1" class="check-line-1">
                                    <div class="diikuti">Diikuti</div>
                                </div>
                            </div>
                            <div class="logoKomun">
                                <img src="{% static 'real/logo_AgriUX 1.png' %}" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="folcmnt">
                        <div class="komun-3">
                            <div class="flex-col">
                                <div class="agribot">Agribot </div>
                                <div class="jmlhAnggota">500 Anggota</div>
                                <div class="flwdButton">
                                    <img src="{% static 'real/check-line 1.svg' %}" alt="check-line 1" class="check-line-1">
                                    <div class="diikuti">Diikuti</div>
                                </div>
                            </div>
                            <div class="logoKomun">
                                <img src="{% static 'real/logo_agribot.png' %}" alt="">
                            </div>
                        </div>
                    </div> {% endcomment %}
                </div>
            </div>
        </div>
    </section>
</body>

</html>